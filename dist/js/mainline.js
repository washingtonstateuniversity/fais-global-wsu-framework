if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (obj, start) {
        for (var i = (start || 0), j = this.length; i < j; i++) {
            if (this[i] === obj) {
                return i;
            }
        }
        return -1;
    };
}
if (!Array.prototype["remove"]) {
    Array.prototype["remove"] = function () {
        var what, a = arguments, L = a.length, ax;
        while (L && this.length) {
            what = a[--L];
            while ((ax = this.indexOf(what)) !== -1) {
                this.splice(ax, 1);
            }
        }
        return this;
    };
}
if (!String.prototype.endsWith) {
    String.prototype.endsWith = function (chars) {
        return this.substr(-chars.length) === chars;
    };
}
if (!String.prototype.leadingChars) {
    String.prototype.leadingChars = function (chars, length) {
        if (length > 0) {
            return (chars.toString().repeat(length) + this).substr(-length);
        }
        else {
            return (this + chars.toString().repeat(-length)).substr(0, -length);
        }
    };
}
if (!String.prototype.toCamelCase) {
    String.prototype.toCamelCase = function () {
        return this.replace(/(?:^\w|[A-Z]|-|\b\w)/g, function (ltr, idx) { return idx === 0
            ? ltr.toLowerCase()
            : ltr.toUpperCase(); }).replace(/\s+|-/g, '');
    };
}
window.matchMedia = window.matchMedia || (window.matchMedia = function () {
    'use strict';
    var styleMedia = (window.styleMedia || window.media);
    if (!styleMedia) {
        var style_1 = document.createElement('style'), script = document.getElementsByTagName('script')[0], info_1 = null;
        style_1.type = 'text/css';
        style_1.id = 'matchmediajs-test';
        script.parentNode.insertBefore(style_1, script);
        info_1 = ('getComputedStyle' in window) && window.getComputedStyle(style_1, null) || style_1.currentStyle;
        styleMedia = {
            matchMedium: function (media) {
                var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';
                if (style_1.styleSheet) {
                    style_1.styleSheet.cssText = text;
                }
                else {
                    style_1.textContent = text;
                }
                return info_1.width === '1px';
            }
        };
    }
    return function (media) {
        return {
            matches: styleMedia.matchMedium(media || 'all'),
            media: media || 'all'
        };
    };
}());
document.getElementsByTagName("html")[0].setAttribute('data-useragent', navigator.userAgent);
window.WSU = window.WSU || {};
(function (w) {
    w.defined = function (ns, type) {
        if ('undefined' !== typeof type) {
            if ('array' === type) {
                return typeof ns === 'object' &&
                    Object.prototype.toString.call(ns) === '[object Array]';
            }
            if ('string' === type) {
                return Object.prototype.toString.call(ns) === '[object String]';
            }
            return 'undefined' !== typeof ns && typeof ns === type;
        }
        return typeof ns !== 'undefined';
    };
    w.define = function (ns, val, ns_root) {
        var parent = ns;
        if (!w.defined(ns, 'object')) {
            parent = w.prime(ns, ns_root);
        }
        try {
            parent = val;
            return true;
        }
        catch (e) {
            w._d(e);
            return false;
        }
    };
    w.merge = function (obj) {
        var out = {};
        for (var i = 0; i < obj.length; i++) {
            for (var _a = 0, _b = Object.keys(obj[i]); _a < _b.length; _a++) {
                var p = _b[_a];
                out[p] = obj[i][p];
            }
        }
        return out;
    };
    w.prime = function (ns, ns_root, options) {
        ns_root = ns_root || window;
        options = Object.assign({ value: {}, override: true, merge: true }, options);
        var parent = ns_root, pl, i;
        function build_ns(_ns) {
            var out = [];
            if (!w.defined(_ns, 'object')) {
                try {
                    out = _ns.toString().split('.');
                }
                catch (e) {
                    w._i(e, _ns);
                    return false;
                }
            }
            else {
                _ns.forEach(function (obj) {
                    out = out.concat(build_ns(obj));
                });
            }
            return out;
        }
        var parts = build_ns(ns);
        pl = parts.length;
        for (i = 0; i < pl; i++) {
            if (!w.defined(parent[parts[i]]) || ((i === pl - 1))) {
                var value = parent[parts[i]] || {};
                if ((i === pl - 1) && w.defined(options.value) && w.defined(options.override) && true === options.override) {
                    if (w.defined(value) && w.defined(options.merge) && true === options.merge) {
                        if (w.defined(options.value, "string") || w.defined(options.value, "number")) {
                            value = value + options.value;
                        }
                        else if (w.defined(options.value, "boolean")) {
                            value = options.value;
                        }
                        else {
                            value = w.merge([value, options.value]);
                        }
                    }
                    else {
                        value = options.value;
                    }
                }
                parent[parts[i]] = value;
            }
            parent = parent[parts[i]];
        }
        return parent;
    };
    w.included = [];
    w.include = function (ns_path, callback) {
        if (!w.defined(w.included[ns_path])) {
            var srpt = document.createElement('script');
            if (w.defined(callback, 'function')) {
                srpt.addEventListener('load', callback);
            }
            srpt.src = ns_path + '.js';
            w.included.push(ns_path);
            document.querySelector('head').appendChild(srpt);
        }
    };
    w._d = function (output) {
        w.defined(WSU.state.debug) && WSU.state.debug && window.console.debug(output);
    };
    w._i = function (a, b) {
        w.defined(WSU.state.debug) && WSU.state.debug && window.console.info(a, b);
    };
}(WSU));
(function ($, jQuery) {
    jQuery.expr[":"].regex = function (elem, index, match) {
        var matchParams = match[3].split(","), validLabels = /^(data|css):/, attr = {
            method: matchParams[0].match(validLabels) ?
                matchParams[0].split(":")[0] : "attr",
            property: matchParams.shift().replace(validLabels, "")
        }, regexFlags = "ig", regex = new RegExp(matchParams.join("").replace(/^\s+|\s+$/g, ""), regexFlags);
        return regex.test(jQuery(elem)[attr.method](attr.property));
    };
    $.fn.overflown = function () { var e = this[0]; return e.scrollHeight > e.clientHeight || e.scrollWidth > e.clientWidth; };
    (function (factory) {
        if (WSU.defined(window.define, "function") && window.define.amd) {
            window.define(["jquery", "./version"], factory);
        }
        else {
            factory(jQuery);
        }
    }(function ($) {
        return jQuery.fn.extend({
            uniqueId: (function () {
                var uuid = 0;
                return function () {
                    return this.each(function () {
                        if (!this.id) {
                            this.id = "fw-trc-" + (++uuid);
                        }
                    });
                };
            })(),
            removeUniqueId: function () {
                return this.each(function () {
                    if (/^fw-trc-\d+$/.test(this.id)) {
                        $(this).removeAttr("id");
                    }
                });
            }
        });
    }));
    $.render = function (html, options) {
        var re, add, match, cursor, code, reExp, result;
        re = /<%(.+?)%>/g;
        reExp = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g;
        code = "var r=[];\n";
        cursor = 0;
        add = function (line, js) {
            if (js) {
                code += line.match(reExp) ? line + "\n" : "r.push(" + line + ");\n";
            }
            else {
                code += line !== "" ? "r.push('" + line.replace(/'/g, "\"") + "');\n" : "";
            }
            return add;
        };
        while ((match = re.exec(html))) {
            add(html.slice(cursor, match.index))(match[1], true);
            cursor = match.index + match[0].length;
        }
        add(html.substr(cursor, html.length - cursor));
        code = (code + "return r.join('');").replace(/[\r\t\n]/g, "");
        result = new Function(code).apply(options);
        return result;
    };
}(window.jQuery, window.jQuery));
(function (window, UI) {
    UI.test = function () {
        WSU._d('get to the UI');
        WSU._d(UI);
        WSU._d('1214'.leadingChars('0', 10));
    };
    WSU.prime('actions.types', UI);
}(window, WSU.prime('ui', WSU)));
(function (window, UTIL) {
    UTIL.dumpKeysRecursively = function (obj, regex) {
        var keys = [];
        regex = regex || false;
        var createKeyPath = function (currentKeyPath, key) {
            return currentKeyPath + (currentKeyPath ? '.' : '') + key;
        };
        (function (path, any) {
            var i, k, currentPath;
            if (WSU.defined(any, "array")) {
                for (i = 0; i < any.length; i += 1) {
                    currentPath = createKeyPath(path, (i).toString());
                    if (false !== regex) {
                        var pmatch = regex.exec(currentPath);
                        if (null !== pmatch) {
                            keys.push(currentPath);
                        }
                    }
                    else {
                        keys.push(currentPath);
                    }
                    arguments.callee(currentPath, any[i]);
                }
            }
            else if (!WSU.defined(any, "string")) {
                for (k in any) {
                    if (any.hasOwnProperty(k)) {
                        currentPath = createKeyPath(path, k);
                        if (false !== regex) {
                            var rmatch = regex.exec(currentPath);
                            if (null !== rmatch) {
                                keys.push(currentPath);
                            }
                        }
                        else {
                            keys.push(currentPath);
                        }
                        arguments.callee(currentPath, any[k]);
                    }
                }
            }
        })('', obj);
        return keys;
    };
}(window, WSU.prime('utilities', WSU)));
(function (window, UTIL) {
    UTIL.test = function () {
        WSU._d('get to the WSUutilStatic');
        WSU._d(UTIL);
        WSU._d('1214'.leadingChars('0', 10));
    };
    WSU.prime('actions.types', UTIL);
}(window, WSU.prime('utilities', WSU)));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbmxpbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NyaXB0cy9wb2x5ZmlsbHMvYXJyYXkucHJvdG90eXBlLmluZGV4b2YudHMiLCIuLi8uLi9zcmMvc2NyaXB0cy9wb2x5ZmlsbHMvYXJyYXkucHJvdG90eXBlLnJlbW92ZS50cyIsIi4uLy4uL3NyYy9zY3JpcHRzL3BvbHlmaWxscy9zdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoLnRzIiwiLi4vLi4vc3JjL3NjcmlwdHMvcG9seWZpbGxzL3N0cmluZy5wcm90b3R5cGUubGVhZGluZ0NoYXIudHMiLCIuLi8uLi9zcmMvc2NyaXB0cy9wb2x5ZmlsbHMvc3RyaW5nLnByb3RvdHlwZS50b0NhbWVsQ2FzZS50cyIsIi4uLy4uL3NyYy9zY3JpcHRzL3BvbHlmaWxscy93aW5kb3cubWF0Y2hNZWRpYS50cyIsIi4uLy4uL3NyYy9zY3JpcHRzL2NvcmUvbWFpbmxpbmUudHMiLCIuLi8uLi9zcmMvc2NyaXB0cy91aS9tYWlubGluZS50cyIsIi4uLy4uL3NyYy9zY3JpcHRzL3V0aWxpdGllcy9kdW1wS2V5c1JlY3Vyc2l2ZWx5L2R1bXBLZXlzUmVjdXJzaXZlbHkudHMiLCIuLi8uLi9zcmMvc2NyaXB0cy91dGlsaXRpZXMvbWFpbmxpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDM0IsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsVUFBUyxHQUFHLEVBQUUsS0FBSztRQUN6QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDckQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUFDLENBQUM7UUFDdEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNkLENBQUMsQ0FBQztBQUNOLENBQUM7QUNQRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQUc7UUFDeEIsSUFBSSxJQUFTLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFPLENBQUM7UUFDcEQsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3RCLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNkLE9BQU8sQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ3RDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNoQixDQUFDLENBQUE7QUFDTCxDQUFDO0FDWEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDN0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxLQUFhO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssQ0FBQztJQUNoRCxDQUFDLENBQUM7QUFDTixDQUFDO0FDSkQsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFDakMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUcsVUFBVSxLQUFvQixFQUFFLE1BQWM7UUFDMUUsRUFBRSxDQUFBLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxDQUFBLENBQUM7WUFDVCxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BFLENBQUM7UUFBQSxJQUFJLENBQUEsQ0FBQztZQUNGLE1BQU0sQ0FBQyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkUsQ0FBQztJQUNMLENBQUMsQ0FBQztBQUNOLENBQUM7QUNSRCxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUNoQyxNQUFNLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRztRQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFDM0MsVUFBQyxHQUFPLEVBQUUsR0FBTyxJQUFLLE9BQUEsR0FBRyxLQUFLLENBQUM7Y0FDckIsR0FBRyxDQUFDLFdBQVcsRUFBRTtjQUNqQixHQUFHLENBQUMsV0FBVyxFQUFFLEVBRkwsQ0FFSyxDQUMxQixDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDNUIsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQ0xLLE1BQU8sQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsSUFBSSxDQUFPLE1BQU8sQ0FBQyxVQUFVLEdBQUc7SUFDeEUsWUFBWSxDQUFDO0lBR2IsSUFBSSxVQUFVLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFVLE1BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUc1RCxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDZCxJQUFJLE9BQUssR0FBUyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxFQUM3QyxNQUFNLEdBQVEsUUFBUSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUN4RCxNQUFJLEdBQVUsSUFBSSxDQUFDO1FBRXZCLE9BQUssQ0FBQyxJQUFJLEdBQUksVUFBVSxDQUFDO1FBQ3pCLE9BQUssQ0FBQyxFQUFFLEdBQU0sbUJBQW1CLENBQUM7UUFFbEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsT0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRzlDLE1BQUksR0FBRyxDQUFDLGtCQUFrQixJQUFJLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksT0FBSyxDQUFDLFlBQVksQ0FBQztRQUVwRyxVQUFVLEdBQUc7WUFDVCxXQUFXLEVBQUUsVUFBUyxLQUFVO2dCQUM1QixJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsS0FBSyxHQUFHLHdDQUF3QyxDQUFDO2dCQUd4RSxFQUFFLENBQUMsQ0FBQyxPQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztvQkFDbkIsT0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUNwQyxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE9BQUssQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO2dCQUM3QixDQUFDO2dCQUdELE1BQU0sQ0FBQyxNQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztZQUNoQyxDQUFDO1NBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxNQUFNLENBQUMsVUFBUyxLQUFVO1FBQ3RCLE1BQU0sQ0FBQztZQUNILE9BQU8sRUFBRSxVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUM7WUFDL0MsS0FBSyxFQUFFLEtBQUssSUFBSSxLQUFLO1NBQ3hCLENBQUM7SUFDTixDQUFDLENBQUM7QUFDTixDQUFDLEVBQUUsQ0FBQyxDQUFDO0FDOUNMLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBTXZGLE1BQU8sQ0FBQyxHQUFHLEdBQVMsTUFBTyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUM7QUFFNUMsQ0FBQyxVQUFVLENBQVk7SUFDbkIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxVQUFTLEVBQU8sRUFBRSxJQUFhO1FBQ3ZDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDOUIsRUFBRSxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLE1BQU0sQ0FBQyxPQUFPLEVBQUUsS0FBSyxRQUFRO29CQUN6QixNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssZ0JBQWdCLENBQUM7WUFDaEUsQ0FBQztZQUNELEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUNwQixNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLGlCQUFpQixDQUFDO1lBQ3BFLENBQUM7WUFDRCxNQUFNLENBQUMsV0FBVyxLQUFLLE9BQU8sRUFBRSxJQUFJLE9BQU8sRUFBRSxLQUFLLElBQUksQ0FBQztRQUMzRCxDQUFDO1FBQ0QsTUFBTSxDQUFDLE9BQU8sRUFBRSxLQUFLLFdBQVcsQ0FBQztJQUNyQyxDQUFDLENBQUM7SUFDRixDQUFDLENBQUMsTUFBTSxHQUFHLFVBQVMsRUFBTyxFQUFFLEdBQVMsRUFBRSxPQUFhO1FBQ2pELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQixNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDbEMsQ0FBQztRQUNELElBQUksQ0FBQztZQUNELE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDYixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ1QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNSLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDakIsQ0FBQztJQUNMLENBQUMsQ0FBQztJQUNGLENBQUMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxHQUFRO1FBQ3ZCLElBQUksR0FBRyxHQUFRLEVBQUUsQ0FBQztRQUNsQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNsQyxHQUFHLENBQUMsQ0FBVSxVQUFtQixFQUFuQixLQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQW5CLGNBQW1CLEVBQW5CLElBQW1CO2dCQUE1QixJQUFJLENBQUMsU0FBQTtnQkFDTixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3RCO1FBQ0wsQ0FBQztRQUNELE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFDZixDQUFDLENBQUM7SUFDRixDQUFDLENBQUMsS0FBSyxHQUFHLFVBQVUsRUFBTyxFQUFFLE9BQWEsRUFBRSxPQUFhO1FBQ3JELE9BQU8sR0FBRyxPQUFPLElBQUksTUFBTSxDQUFDO1FBRTVCLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUMsS0FBSyxFQUFDLEVBQUUsRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxJQUFJLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUV0RSxJQUFJLE1BQU0sR0FBRyxPQUFPLEVBQ2hCLEVBQVUsRUFDVixDQUFTLENBQUM7UUFFZCxrQkFBa0IsR0FBUTtZQUN0QixJQUFJLEdBQUcsR0FBUSxFQUFFLENBQUM7WUFDbEIsRUFBRSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQztvQkFDRCxHQUFHLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDcEMsQ0FBQztnQkFBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO29CQUNiLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7WUFDTCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQVE7b0JBQzFCLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNwQyxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUM7WUFDRCxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2YsQ0FBQztRQUVELElBQUksS0FBSyxHQUFRLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM5QixFQUFFLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUNsQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUV0QixFQUFFLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZELElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ25DLEVBQUUsQ0FBQyxDQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUUsSUFBSSxJQUFJLEtBQUssT0FBTyxDQUFDLFFBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQzdHLEVBQUUsQ0FBQSxDQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBRSxPQUFPLENBQUMsS0FBSyxDQUFFLElBQUksSUFBSSxLQUFLLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFDO3dCQUUxRSxFQUFFLENBQUEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUEsQ0FBQzs0QkFDdkUsS0FBSyxHQUFHLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO3dCQUNsQyxDQUFDO3dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUMsU0FBUyxDQUFFLENBQUMsQ0FBQyxDQUFDOzRCQUM1QyxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQzt3QkFDMUIsQ0FBQzt3QkFBQyxJQUFJLENBQUMsQ0FBQzs0QkFDSixLQUFLLEdB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LENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzFDLENBQUM7Z0JBQ0wsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWixNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUUsQ0FBRSxDQUFDO0FDekMzQyxDQUFDLFVBQVUsTUFBVyxFQUFFLElBQW1CO0lBQ3RDLElBQUksQ0FBQyxJQUFJLEdBQUc7UUFDVCxHQUFHLENBQUMsRUFBRSxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFDbkMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNiLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFFRixHQUFHLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNyQyxDQUFDLENBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFFLENBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImlmICghQXJyYXkucHJvdG90eXBlLmluZGV4T2YpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uKG9iaiwgc3RhcnQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IChzdGFydCB8fCAwKSwgaiA9IHRoaXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpc1tpXSA9PT0gb2JqKSB7IHJldHVybiBpOyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG59XG4iLCJpZiAoIUFycmF5LnByb3RvdHlwZVtcInJlbW92ZVwiXSkge1xuICAgIEFycmF5LnByb3RvdHlwZVtcInJlbW92ZVwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdoYXQ6IGFueSwgYSA9IGFyZ3VtZW50cywgTCA9IGEubGVuZ3RoLCBheDogYW55O1xuICAgICAgICB3aGlsZSAoTCAmJiB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgd2hhdCA9IGFbLS1MXTtcbiAgICAgICAgICAgIHdoaWxlICgoYXggPSB0aGlzLmluZGV4T2Yod2hhdCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaWNlKGF4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpZiAoIVN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoID0gZnVuY3Rpb24gKGNoYXJzOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic3RyKC1jaGFycy5sZW5ndGgpID09PSBjaGFycztcbiAgICB9O1xufVxuIiwiaWYgKCFTdHJpbmcucHJvdG90eXBlLmxlYWRpbmdDaGFycykge1xuICAgIFN0cmluZy5wcm90b3R5cGUubGVhZGluZ0NoYXJzID0gZnVuY3Rpb24gKGNoYXJzOiBzdHJpbmd8bnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyAge1xuICAgICAgICBpZihsZW5ndGg+MCl7XG4gICAgICAgICAgICByZXR1cm4gKGNoYXJzLnRvU3RyaW5nKCkucmVwZWF0KGxlbmd0aCkgKyB0aGlzKS5zdWJzdHIoLWxlbmd0aCk7IC8vbnVtYmVyIGlzIHBvc2l0aXZlLCBzbyBjdXQgZnJvbSByaWdodCBha2EgbGVhZGluZ1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiAodGhpcyArIGNoYXJzLnRvU3RyaW5nKCkucmVwZWF0KC1sZW5ndGgpKS5zdWJzdHIoMCwtbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpZiAoIVN0cmluZy5wcm90b3R5cGUudG9DYW1lbENhc2UpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnRvQ2FtZWxDYXNlID0gZnVuY3Rpb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvKD86Xlxcd3xbQS1aXXwtfFxcYlxcdykvZyxcbiAgICAgICAgKGx0cjphbnksIGlkeDphbnkpID0+IGlkeCA9PT0gMFxuICAgICAgICAgICAgICAgID8gbHRyLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICA6IGx0ci50b1VwcGVyQ2FzZSgpXG4gICAgICAgICkucmVwbGFjZSgvXFxzK3wtL2csICcnKTtcbiAgICB9O1xufVxuIiwiLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy5cbiAgICBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcywgRGF2aWQgS25pZ2h0LiBEdWFsIE1JVC9CU0QgbGljZW5zZVxuICAgIHx8IGFsdGVyZWQgdG8gd29yayBmb3IgdHlwZXNjcml0cHQgYnkgSmVyZW15IEJhc3MgaW4gMjAxNiAqL1xuKDxhbnk+d2luZG93KS5tYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEgfHwgKCg8YW55PndpbmRvdykubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XG4gICAgbGV0IHN0eWxlTWVkaWEgPSAod2luZG93LnN0eWxlTWVkaWEgfHwgKDxhbnk+d2luZG93KS5tZWRpYSk7XG5cbiAgICAvLyBGb3IgdGhvc2UgdGhhdCBkb24ndCBzdXBwb3J0IG1hdGNoTWVkaXVtXG4gICAgaWYgKCFzdHlsZU1lZGlhKSB7XG4gICAgICAgIGxldCBzdHlsZTogYW55ICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksXG4gICAgICAgICAgICBzY3JpcHQ6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXSxcbiAgICAgICAgICAgIGluZm86IGFueSAgID0gbnVsbDtcblxuICAgICAgICBzdHlsZS50eXBlICA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgIHN0eWxlLmlkICAgID0gJ21hdGNobWVkaWFqcy10ZXN0JztcblxuICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGUsIHNjcmlwdCk7XG5cbiAgICAgICAgLy8gJ3N0eWxlLmN1cnJlbnRTdHlsZScgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnd2luZG93LmdldENvbXB1dGVkU3R5bGUnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgaW5mbyA9ICgnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93KSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZSwgbnVsbCkgfHwgc3R5bGUuY3VycmVudFN0eWxlO1xuXG4gICAgICAgIHN0eWxlTWVkaWEgPSB7XG4gICAgICAgICAgICBtYXRjaE1lZGl1bTogZnVuY3Rpb24obWVkaWE6IGFueSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xuXG4gICAgICAgICAgICAgICAgLy8gJ3N0eWxlLnN0eWxlU2hlZXQnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3N0eWxlLnRleHRDb250ZW50JyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZm8ud2lkdGggPT09ICcxcHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihtZWRpYTogYW55KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXRjaGVzOiBzdHlsZU1lZGlhLm1hdGNoTWVkaXVtKG1lZGlhIHx8ICdhbGwnKSxcbiAgICAgICAgICAgIG1lZGlhOiBtZWRpYSB8fCAnYWxsJ1xuICAgICAgICB9O1xuICAgIH07XG59KCkpO1xuIiwiZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdLnNldEF0dHJpYnV0ZSgnZGF0YS11c2VyYWdlbnQnLCBuYXZpZ2F0b3IudXNlckFnZW50KTtcbi8vdG8gaGVsbCB3aXRoIHRoaW5ncywgbGV0IHRoZSBkZXYgZGVjaWRlIGlmIHRoZXkgd2FudCB0byBzZXQgYnJvd3NlciB0YXJnZXRlZCBzdHVmZi5cbi8vYWltIGlzIHRvIGFzc3VtZSBhbnlvbmUgbWFza2luZyB0aGVpciBhZ2VudCBrbm93IHdoYXQgdGhleSBhcmUgZ2V0dGluZyBpbiBmb3IgeWV0IGlzIHN0aWxsIGFjY291bnRhYmxlIGZvciB0b28uXG5cblxuLy8gQ29waWVkIHdpdGggcGVybWlzc2lvbiBmcm9tIGZsZXhlZFxuKDxhbnk+d2luZG93KS5XU1UgPSAoPGFueT53aW5kb3cpLldTVSB8fCB7fTtcblxuKGZ1bmN0aW9uICh3OiBXU1VzdGF0aWMpIHtcbiAgICB3LmRlZmluZWQgPSBmdW5jdGlvbihuczogYW55LCB0eXBlPzogc3RyaW5nKSB7XG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHR5cGUpIHtcbiAgICAgICAgICAgIGlmICgnYXJyYXknID09PSB0eXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBucyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5zKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobnMpID09PSAnW29iamVjdCBTdHJpbmddJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG5zICYmIHR5cGVvZiBucyA9PT0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZW9mIG5zICE9PSAndW5kZWZpbmVkJztcbiAgICB9O1xuICAgIHcuZGVmaW5lID0gZnVuY3Rpb24obnM6IGFueSwgdmFsPzogYW55LCBuc19yb290PzogYW55KSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSBucztcbiAgICAgICAgaWYgKCF3LmRlZmluZWQobnMsICdvYmplY3QnKSkge1xuICAgICAgICAgICAgcGFyZW50ID0gdy5wcmltZShucywgbnNfcm9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHsgLy8gdGVzdGluZyBjYXN1ZSBpZiBpdCBkb2VzIGZhaWwgd2VsbCBpdCBkaWQgYW5kIHRoYXQgY291bGQgYmUgdXNlZnVsXG4gICAgICAgICAgICBwYXJlbnQgPSB2YWw7IC8vIHdvcnJpZWQgdGhpcyB3aWxsIG5vdCB1cGRhdGUgcGFyZW50IG5zIDEwMFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHcuX2QoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHcubWVyZ2UgPSBmdW5jdGlvbihvYmo6IGFueSkge1xuICAgICAgICBsZXQgb3V0OiBhbnkgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHAgb2YgT2JqZWN0LmtleXMob2JqW2ldKSApIHsgLy8gbGV0IHAgaW4gb2JqW2ldKSB7XG4gICAgICAgICAgICAgICAgb3V0W3BdID0gb2JqW2ldW3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICB3LnByaW1lID0gZnVuY3Rpb24gKG5zOiBhbnksIG5zX3Jvb3Q/OiBhbnksIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgbnNfcm9vdCA9IG5zX3Jvb3QgfHwgd2luZG93O1xuICAgICAgICAvLyBodWxrIHNtYXNoP1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7dmFsdWU6e30sb3ZlcnJpZGU6dHJ1ZSxtZXJnZTp0cnVlfSwgb3B0aW9ucyk7Ly8gb3B0aW9ucyB8fCB7dmFsdWU6e30sb3ZlcnJpZGU6ZmFsc2UsfTtcblxuICAgICAgICB2YXIgcGFyZW50ID0gbnNfcm9vdCxcbiAgICAgICAgICAgIHBsOiBudW1iZXIsXG4gICAgICAgICAgICBpOiBudW1iZXI7XG5cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRfbnMoX25zOiBhbnkpOiBhbnkgeyAvLyBzaG91bGQgYmUgYWJsZSB0byByZWZhY3RvciB0aGlzIGJpdFxuICAgICAgICAgICAgbGV0IG91dDogYW55ID0gW107XG4gICAgICAgICAgICBpZiAoICF3LmRlZmluZWQoX25zLCAnb2JqZWN0JykgKSB7IC8vIGVnIHN0cmluZyBvciBudW1iZXIgLy93YXMgJ29iamVjdCcgIT09IHR5cGVvZiBfbnNcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvdXQgPSBfbnMudG9TdHJpbmcoKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgLy8gc28gYXQgdGhpcyBwb2ludCBpdCB3YXMgbm90IGFuIG9iamVjdCwgbnVtYmVyIG9yIHN0cmluZy4uLiB3aGF0IGlzIGl0P1xuICAgICAgICAgICAgICAgICAgICB3Ll9pKGUsIF9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvYmo6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBvdXQgPSBvdXQuY29uY2F0KGJ1aWxkX25zKG9iaikpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXJ0czogYW55ID0gYnVpbGRfbnMobnMpO1xuICAgICAgICBwbCA9IHBhcnRzLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHBsOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHByb3BlcnR5IGlmIGl0IGRvZXNudCBleGlzdFxuICAgICAgICAgICAgaWYgKCAhdy5kZWZpbmVkKCBwYXJlbnRbcGFydHNbaV1dICkgfHwgKChpID09PSBwbCAtIDEpKSApIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBwYXJlbnRbcGFydHNbaV1dIHx8IHt9O1xuICAgICAgICAgICAgICAgIGlmICggKGkgPT09IHBsIC0gMSkgJiYgdy5kZWZpbmVkKG9wdGlvbnMudmFsdWUpICYmIHcuZGVmaW5lZCggb3B0aW9ucy5vdmVycmlkZSApICYmIHRydWUgPT09IG9wdGlvbnMub3ZlcnJpZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB3LmRlZmluZWQodmFsdWUpICYmIHcuZGVmaW5lZCggb3B0aW9ucy5tZXJnZSApICYmIHRydWUgPT09IG9wdGlvbnMubWVyZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGV4dCBvcHRpb25zLnZhbHVlIG92ZXIgdmFsdWUgYXMgdGhlIHdyaXRlciBzaG91bGQgZGVmaW5lZCBhbmQgdGVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYody5kZWZpbmVkKG9wdGlvbnMudmFsdWUsXCJzdHJpbmdcIikgfHwgdy5kZWZpbmVkKG9wdGlvbnMudmFsdWUsXCJudW1iZXJcIikpey8vIHJlYWxseT8gIGxvbCB3aHkgd291bGQgeW91PyAgYnV0IHJlZ2FyZGxlc3MgZG9uJ3QgYnVpbGQgd2FsbHMgc28gbGVhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgb3B0aW9ucy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih3LmRlZmluZWQob3B0aW9ucy52YWx1ZSxcImJvb2xlYW5cIikgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHcubWVyZ2UoW3ZhbHVlLCBvcHRpb25zLnZhbHVlXSk7Ly9PYmplY3QuYXNzaWduKHZhbHVlLCBvcHRpb25zLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyZW50W3BhcnRzW2ldXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50W3BhcnRzW2ldXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH07XG4gICAgdy5pbmNsdWRlZCA9IFtdO1xuICAgIHcuaW5jbHVkZSA9IGZ1bmN0aW9uIChuc19wYXRoOiBzdHJpbmcsIGNhbGxiYWNrPzogYW55KXtcbiAgICAgICAgaWYgKCF3LmRlZmluZWQody5pbmNsdWRlZFtuc19wYXRoXSkpIHsvLyBpZiBpdCBpcyBsb2FkZWQgZG9uJ3Qgd29ycnlcbiAgICAgICAgICAgIGxldCBzcnB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICBpZiAoIHcuZGVmaW5lZChjYWxsYmFjaywgJ2Z1bmN0aW9uJykgKSB7XG4gICAgICAgICAgICAgICAgc3JwdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2FsbGJhY2spOyAvLyBwYXNzIG15IGhvaXN0ZWQgZnVuY3Rpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNycHQuc3JjID0gbnNfcGF0aCArICcuanMnO1xuICAgICAgICAgICAgdy5pbmNsdWRlZC5wdXNoKG5zX3BhdGgpO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmFwcGVuZENoaWxkKHNycHQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHcuX2QgPSBmdW5jdGlvbihvdXRwdXQ6IGFueSkge1xuICAgICAgICAvLyByZXR1cm4gZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgICB3LmRlZmluZWQoV1NVLnN0YXRlLmRlYnVnKSAmJiBXU1Uuc3RhdGUuZGVidWcgJiYgKDxhbnk+d2luZG93KS5jb25zb2xlLmRlYnVnKG91dHB1dCk7IC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICB9O1xuICAgIHcuX2kgPSBmdW5jdGlvbihhOiBhbnksIGI6IGFueSkge1xuICAgICAgICAvLyByZXR1cm4gZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgICB3LmRlZmluZWQoV1NVLnN0YXRlLmRlYnVnKSAmJiBXU1Uuc3RhdGUuZGVidWcgJiYgKDxhbnk+d2luZG93KS5jb25zb2xlLmluZm8oYSwgYik7IC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICB9O1xufShXU1UpKTtcblxuXG5cbi8qXG4qIGpRdWVyeSBoZWxwZXJzLiAgTWF5IG1vdmUgYXdheSBmcm9tIGhlcmUsIGJ1dCBtdXN0IHByb3h5IGFueXRoaW5nXG4qL1xuKGZ1bmN0aW9uKCQsalF1ZXJ5KXsgLy8gdGhpcyB3aWxsIGRlcGVuZCBvbiBqUXVlcnlcbiAgICBqUXVlcnkuZXhwcltcIjpcIl0ucmVnZXggPSBmdW5jdGlvbiAoZWxlbTphbnksIGluZGV4OmFueSwgbWF0Y2g6YW55KSB7XG4gICAgICAgIHZhciBtYXRjaFBhcmFtcyA9IG1hdGNoWzNdLnNwbGl0KFwiLFwiKSxcbiAgICAgICAgICAgIHZhbGlkTGFiZWxzID0gL14oZGF0YXxjc3MpOi8sXG4gICAgICAgICAgICBhdHRyID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogbWF0Y2hQYXJhbXNbMF0ubWF0Y2godmFsaWRMYWJlbHMpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFBhcmFtc1swXS5zcGxpdChcIjpcIilbMF0gOiBcImF0dHJcIixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogbWF0Y2hQYXJhbXMuc2hpZnQoKS5yZXBsYWNlKHZhbGlkTGFiZWxzLCBcIlwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZ2V4RmxhZ3MgPSBcImlnXCIsXG4gICAgICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAobWF0Y2hQYXJhbXMuam9pbihcIlwiKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKSwgcmVnZXhGbGFncyk7XG4gICAgICAgIHJldHVybiByZWdleC50ZXN0KGpRdWVyeShlbGVtKVthdHRyLm1ldGhvZF0oYXR0ci5wcm9wZXJ0eSkpO1xuICAgIH07XG4gICAgJC5mbi5vdmVyZmxvd24gPSBmdW5jdGlvbiAoKSB7IGxldCBlID0gdGhpc1swXTsgcmV0dXJuIGUuc2Nyb2xsSGVpZ2h0ID4gZS5jbGllbnRIZWlnaHQgfHwgZS5zY3JvbGxXaWR0aCA+IGUuY2xpZW50V2lkdGg7IH07XG4gICAgLy90YXJnZXRlZC51bmlxdWVJZCgpOyB8IHJlbW92ZVVuaXF1ZUlkKCkgLy8galF1ZXJ5IGV4dFxuICAgIChmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgICAgICBpZiAoIFdTVS5kZWZpbmVkKCAoPGFueT4gd2luZG93KS5kZWZpbmUsIFwiZnVuY3Rpb25cIikgJiYgKDxhbnk+IHdpbmRvdykuZGVmaW5lLmFtZCkge1xuICAgICAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICAgICAgKDxhbnk+IHdpbmRvdykuZGVmaW5lKFtcImpxdWVyeVwiLCBcIi4vdmVyc2lvblwiXSwgZmFjdG9yeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICAgICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICAgICAgfVxuICAgIH0oZnVuY3Rpb24gKCQ6YW55KSB7XG4gICAgICAgIHJldHVybiBqUXVlcnkuZm4uZXh0ZW5kKHtcbiAgICAgICAgICAgIHVuaXF1ZUlkOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB1dWlkID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWQgPSBcImZ3LXRyYy1cIiArICgrK3V1aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgIHJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvXmZ3LXRyYy1cXGQrJC8udGVzdCh0aGlzLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKFwiaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkpO1xuXG4gICAgJC5yZW5kZXIgPSBmdW5jdGlvbiAoaHRtbDphbnksIG9wdGlvbnM6YW55KSB7XG4gICAgICAgIC8vIEB0b2RvIGFkZCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgZm9yIGVtcHR5cyBhdCB0aGUgbGVhc3RcbiAgICAgICAgdmFyIHJlLCBhZGQ6YW55LCBtYXRjaCwgY3Vyc29yLCBjb2RlOmFueSwgcmVFeHA6YW55LCByZXN1bHQ7XG5cbiAgICAgICAgcmUgPSAvPCUoLis/KSU+L2c7XG4gICAgICAgIHJlRXhwID0gLyheKCApPyh2YXJ8aWZ8Zm9yfGVsc2V8c3dpdGNofGNhc2V8YnJlYWt8e3x9fDspKSguKik/L2c7XG4gICAgICAgIGNvZGUgPSBcInZhciByPVtdO1xcblwiO1xuICAgICAgICBjdXJzb3IgPSAwO1xuXG4gICAgICAgIGFkZCA9IGZ1bmN0aW9uIChsaW5lOmFueSwganM6YW55KSB7XG4gICAgICAgICAgICBpZiAoanMpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGxpbmUubWF0Y2gocmVFeHApID8gbGluZSArIFwiXFxuXCIgOiBcInIucHVzaChcIiArIGxpbmUgKyBcIik7XFxuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gbGluZSAhPT0gXCJcIiA/IFwici5wdXNoKCdcIiArIGxpbmUucmVwbGFjZSgvJy9nLCBcIlxcXCJcIikgKyBcIicpO1xcblwiIDogXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhZGQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMoaHRtbCkpKSB7XG4gICAgICAgICAgICBhZGQoaHRtbC5zbGljZShjdXJzb3IsIG1hdGNoLmluZGV4KSkobWF0Y2hbMV0sIHRydWUpO1xuICAgICAgICAgICAgY3Vyc29yID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICBhZGQoaHRtbC5zdWJzdHIoY3Vyc29yLCBodG1sLmxlbmd0aCAtIGN1cnNvcikpO1xuICAgICAgICBjb2RlID0gKGNvZGUgKyBcInJldHVybiByLmpvaW4oJycpO1wiKS5yZXBsYWNlKC9bXFxyXFx0XFxuXS9nLCBcIlwiKTtcbiAgICAgICAgcmVzdWx0ID0gbmV3IEZ1bmN0aW9uKGNvZGUpLmFwcGx5KG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn0oKDxhbnk+d2luZG93KS5qUXVlcnksKDxhbnk+d2luZG93KS5qUXVlcnkpKTtcbiIsIihmdW5jdGlvbiAod2luZG93OiBhbnksIFVJOiBXU1V1aVN0YXRpYykge1xuICAgICBVSS50ZXN0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgV1NVLl9kKCdnZXQgdG8gdGhlIFVJJyk7XG4gICAgICAgIFdTVS5fZChVSSk7XG4gICAgICAgIFdTVS5fZCgnMTIxNCcubGVhZGluZ0NoYXJzKCcwJywgMTApKTtcbiAgICB9O1xuXG4gICAgLy8gY2FuIGV4dGVuZCB0aGlzXG4gICAgV1NVLnByaW1lKCdhY3Rpb25zLnR5cGVzJywgVUkpO1xufSAod2luZG93LCBXU1UucHJpbWUoJ3VpJywgV1NVKSApICk7XG4iLCIoZnVuY3Rpb24gKHdpbmRvdzogYW55LCBVVElMOiBXU1V1dGlsU3RhdGljKSB7XG4gICAgVVRJTC5kdW1wS2V5c1JlY3Vyc2l2ZWx5ID0gZnVuY3Rpb24gKG9iajogYW55LCByZWdleDogYW55KSB7XG4gICAgICAgIHZhciBrZXlzOiBhbnkgPSBbXTtcbiAgICAgICAgcmVnZXggPSByZWdleCB8fCBmYWxzZTtcbiAgICAgICAgdmFyIGNyZWF0ZUtleVBhdGggPSBmdW5jdGlvbiAoY3VycmVudEtleVBhdGg6IGFueSwga2V5OiBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50S2V5UGF0aCArIChjdXJyZW50S2V5UGF0aCA/ICcuJyA6ICcnKSArIGtleTtcbiAgICAgICAgfTtcbiAgICAgICAgKGZ1bmN0aW9uIChwYXRoOiBhbnksIGFueTogYW55KSB7XG4gICAgICAgICAgICB2YXIgaTogYW55LCBrOiBhbnksIGN1cnJlbnRQYXRoOiBhbnk7XG4gICAgICAgICAgICBpZiAoIFdTVS5kZWZpbmVkKGFueSxcImFycmF5XCIpICkge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhbnkubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGggPSBjcmVhdGVLZXlQYXRoKHBhdGgsIChpKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlICE9PSByZWdleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBtYXRjaCA9IHJlZ2V4LmV4ZWMoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHBtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5jYWxsZWUoY3VycmVudFBhdGgsIGFueVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICggIVdTVS5kZWZpbmVkKGFueSxcInN0cmluZ1wiKSApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGsgaW4gYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbnkuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gY3JlYXRlS2V5UGF0aChwYXRoLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gcmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm1hdGNoID0gcmVnZXguZXhlYyhjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHJtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5jYWxsZWUoY3VycmVudFBhdGgsIGFueVtrXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCcnLCBvYmopO1xuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xufSAod2luZG93LCBXU1UucHJpbWUoJ3V0aWxpdGllcycsIFdTVSkgKSApO1xuIiwiKGZ1bmN0aW9uICh3aW5kb3c6IGFueSwgVVRJTDogV1NVdXRpbFN0YXRpYykge1xuICAgICBVVElMLnRlc3QgPSBmdW5jdGlvbigpe1xuICAgICAgICBXU1UuX2QoJ2dldCB0byB0aGUgV1NVdXRpbFN0YXRpYycpO1xuICAgICAgICBXU1UuX2QoVVRJTCk7XG4gICAgICAgIFdTVS5fZCgnMTIxNCcubGVhZGluZ0NoYXJzKCcwJywgMTApKTtcbiAgICB9O1xuICAgIC8vIGNhbiBleHRlbmQgdGhpc1xuICAgIFdTVS5wcmltZSgnYWN0aW9ucy50eXBlcycsIFVUSUwpO1xufSAod2luZG93LCBXU1UucHJpbWUoJ3V0aWxpdGllcycsIFdTVSkgKSApO1xuIl19